{% extends '_base.html' %}
{% block title %}
    <title>Всі типи матеріалів</title>
{% endblock title %}

{% block content %}
    <a href="{% url 'materials:recommendations' page_obj.0.material_type.slug %}" type="button"
       class="btn btn-secondary btn-lg btn-block" style="color: #fff;">
        Переглянути цільові пропозицій в категорій "{{ page_obj.0.material_type.title }}"
    </a>
    <div class="container">
        <br/>

        <h2 class="text-center">Всі {{ page_obj.0.material_type.title }}</h2>
        <div class="row">
            {% for obj in page_obj %}
                <div class="col-md-6" style="margin-top: 30px">
                    <div class="card" style="background-color: #E8F8F5">
                        <div class="card-body">
                            <h3>{{ obj.title_original }}</h3>
                            <div class="row">
                                <div class="col-md-6">
                                    <a href="{% url 'materials:details' obj.material_type.slug obj.id %}">
                                        <img src="{% if 'http' in obj.image.url %}
                                                    {{ obj.image }}
                                                  {% else %}
                                                    {{ obj.image.url }}
                                                  {% endif %}"
                                             alt="{{ obj.slug }}"
                                             class="rounded mx-auto d-block" style="width: 100%">
                                    </a>
                                </div>
                                <div class="col-md-6">
                                    {{ obj.technical_description|safe    }}
                                    <hr/>
                                    <b>Оцінка користувачів: {{ obj.average_mark|floatformat }}</b>
                                    <br>
                                    <b>Оцінка редактора: {{ obj.redactor_mark }}</b>
                                </div>
                                {#                        <div class="col-md-6">#}
                                {#                            {{ obj.description|truncatechars:900|safe }}#}
                                {#                        </div>#}
                            </div>
{#                            <div class="row">#}
{#                                <div class="col-md-12">#}
{#                                    {% if obj.average_mark %}#}
{#                                        <h5>Оцінка користувачів: {{ obj.average_mark }}</h5>#}
{#                                    {% endif %}#}
{#                                    {% if obj.redactor_mark  %}#}
{#                                        <h5>Оцінка редактора: {{ obj.redactor_mark }}</h5>#}
{#                                    {% endif %}#}
{##}
{#                                </div>#}
{#                            </div>#}
                        </div>
                    </div>
                </div>
                <br/>

            {% endfor %}
        </div>
        {% if page_obj.has_previous or page_obj.has_next %}
            <nav aria-label="Page navigation example">
                <ul class="pagination justify-content-center">
                    <li class="page-item {% if not page_obj.has_previous %}disabled{% endif %}">
                        <a class="page-link"
                           href="?page={% if page_obj.has_previous %}{{ page_obj.previous_page_number }}{% endif %}"
                           tabindex="-1">Previous
                        </a>
                    </li>
                    <li class="page-item active">
                        <a class="page-link" href="?page={{ page_obj.number }}">{{ page_obj.number }} <span class="sr-only">(current)</span></a>
                    </li>

                    <li class="page-item {% if not page_obj.has_next %}disabled{% endif %}">
                        <a class="page-link"
                           href="?page={% if page_obj.has_next %}{{ page_obj.next_page_number }}{% endif %}"
                           tabindex="-1">Next
                        </a>
                    </li>
                </ul>
            </nav>
        {% endif %}

    </div>
{% endblock %}